(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a06012ce"],{"00ef":function(t,n,e){"use strict";e("7687")},"5d00":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"swaptoken-context"},[e("el-card",{staticClass:"swap-box"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v("Stakes")]),e("span",[t._v("Stake TKB token ExChange TKS")]),e("br"),e("br"),e("div",[t._v("TOTAL: "+t._s(t.info.ins)+" , STAKE: "+t._s(t.amountIned))])]),e("div",{staticClass:"swap-box-input"},[e("div",[e("span",[t._v(t._s(t.$t("merit.in")))]),e("span",{staticStyle:{float:"right",margin:"0.5rem"}},[t._v(t._s(t.$t("merit.balance"))+": "+t._s(t.Wallet.smallBalance))])]),e("el-input",{attrs:{min:1,type:"number",placeholder:"0"},on:{input:t.amountInChange},model:{value:t.amountIn,callback:function(n){t.amountIn=n},expression:"amountIn"}},[t.amountIn!=t.Wallet.smallBalance?e("h4",{staticClass:"swap-box-input-max",attrs:{slot:"suffix"},on:{click:function(n){t.amountIn=t.Wallet.smallBalance,t.amountInChange()}},slot:"suffix"},[t._v(" MAX ")]):t._e(),e("h3",{staticClass:"swap-box-input-coin",attrs:{slot:"suffix"},slot:"suffix"},[t._v(" TKB ")])])],1),!t.enable||t.countdown>0?[e("el-button",{staticClass:"swap-box-btn",attrs:{disabled:!0,type:"info"}},[t._v(t._s(t.enable?t.doucntdownStr:t.$t("merit.disable")))])]:[t.isapprove?[e("el-button",{staticClass:"swap-box-btn",attrs:{loading:t.swaping,disabled:t.amountIn>t.Wallet.smallBalance||t.amountIn<=0,type:"primary"},on:{click:t.doswap}},[t._v(t._s(t.$t("swaptoken.stake")))])]:[e("el-button",{staticClass:"swap-box-btn",attrs:{loading:t.approveing,type:"primary"},on:{click:t.doapprove}},[t._v(t._s(t.$t("swaptoken.approve")))])]]],2)],1)},r=[],o=e("5530"),s=e("1da1"),i=(e("96cf"),e("d3b7"),e("25f0"),e("a9e3"),e("6779")),c={data:function(){return{isapprove:!1,swaping:!1,enable:!0,countdown:0,amountIn:0,amountIned:0,totalIn:0,approveing:!1,state:{InEnable:!1,InStartTimeSpan:0,InStopTimeSpan:0,OutEnable:!1,OutTimeSpan:0},info:{count:0,ins:0,outs:0}}},mounted:function(){this.Wallet.connected?this.refreshInfo():this.Wallet.$on("connect",this.onconnect)},methods:{onconnect:function(){this.Wallet.$off("connect",this.onconnect),this.refreshInfo()},refreshInfo:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var e,a,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e=t.Wallet,a=e.token,r=e.buyback,s=e.account,a.allowance(s,r.address).then((function(n){t.isapprove="0"!==n.toString()})),r.getOrderByAddr(s).then((function(n){var e=n.amount;t.amountIned=Math.floor(Number(i["c"].formatEther(e)))})),r.getOrderInfo().then((function(n){t.info.count=n.count.toNumber(),t.info.ins=Number(i["c"].formatEther(n.ins)),t.info.outs=Number(i["c"].formatEther(n.outs))})),r.status().then((function(n){t.state=Object(o["a"])({},n)}));case 5:case"end":return n.stop()}}),n)})))()},amountInChange:function(t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t)try{n.amountIn=Number(Math.floor(n.amountIn)),Number(n.amountIn)<0&&(n.amountIn=0)}catch(a){n.amountIn=0}case 1:case"end":return e.stop()}}),e)})))()},doapprove:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var e,a,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e=t.Wallet,a=e.token,r=e.buyback,t.approveing=!0,n.prev=2,n.next=5,a.approve(r.address,i["c"].parseEther("100000000"));case 5:return o=n.sent,n.next=8,o.wait();case 8:t.isapprove=!0;case 9:return n.prev=9,t.approveing=!1,n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[2,,9,12]])})))()},doswap:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var e,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e=t.Wallet.buyback,t.swaping=!0,n.prev=2,n.next=5,e.doBuyBack(i["c"].parseEther("".concat(t.amountIn)));case 5:return a=n.sent,n.next=8,a.wait();case 8:t.refreshInfo(),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),t.$message.error(n.t0.data.message);case 14:return n.prev=14,t.swaping=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,11,14,17]])})))()}}},u=c,l=(e("00ef"),e("2877")),p=Object(l["a"])(u,a,r,!1,null,null,null);n["default"]=p.exports},7687:function(t,n,e){}}]);