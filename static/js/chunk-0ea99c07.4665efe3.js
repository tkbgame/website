(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ea99c07"],{"1098a":function(t,e,a){t.exports=a.p+"static/img/zhangliang.1d3d6c0d.png"},"25e3":function(t,e,a){},"2c8b":function(t,e,a){"use strict";a("9f70")},"2e32":function(t,e,a){"use strict";a("25e3")},"4d23":function(t,e,a){t.exports=a.p+"static/img/12.d8728219.png"},6668:function(t,e,a){t.exports=a.p+"static/img/zhangjiao.24d4d5c5.png"},"9f70":function(t,e,a){},bb4f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pvb-container"},[a("el-row",{staticClass:"battle",attrs:{gutter:0}},t._l(t.items,(function(e){return a("el-col",{key:e.name,attrs:{lg:6,sm:12,xs:12}},[a("div",{staticClass:"battle-col"},[a("img",{attrs:{width:"100%",src:e.image,draggable:"false"}}),a("div",{staticClass:"battle-info"},[a("h4",[t._v("State: "+t._s(e.state)+" "),a("span",{staticStyle:{float:"right"}},[t._v("#"+t._s(e.lastIndex))])]),a("el-progress",{staticClass:"battle-progress",attrs:{"text-inside":"","stroke-width":20,color:t.colors,percentage:e.bloodUse}}),a("h4",[t._v("Rate: ~ "+t._s(e.rate)+" %")]),a("h4",[t._v("Reward: "+t._s(e.reward)+" "+t._s(t.$t("merit")))]),t.Wallet.game3approve?["Dead"!=e.state?a("el-button",{staticStyle:{width:"100%"},attrs:{loading:"Loading"==e.state,type:"danger"},on:{click:function(a){return t.$router.push("/battle-pvb/"+e.name+"/"+e.lastIndex)}}},[t._v(t._s(t.$t("pvb.enter")))]):a("el-button",{staticStyle:{width:"100%"},attrs:{disabled:"",type:"danger"}},[t._v(t._s(e.countDown))])]:a("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.ActivationIng,type:"primary"},on:{click:t.Activation}},[t._v("Activation")])],2)])])})),1)],1)},o=[],r=a("5530"),s=a("3835"),i=a("1da1"),c=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),a("159b"),a("7db0"),a("b0c0"),a("a9e3"),a("b680"),a("99af"),a("6779")),l={data:function(){return{ActivationIng:!1,items:[{state:"Loading",name:"soldiers1",image:a("4d23"),rate:0,reward:0,bloodUse:0,countDown:""},{state:"Loading",name:"zhangliang",image:a("1098a"),rate:0,reward:0,bloodUse:0,countDown:""},{state:"Loading",name:"zhangbao",image:a("ec52"),rate:0,reward:0,bloodUse:0,countDown:""},{state:"Loading",name:"zhangjiao",image:a("6668"),rate:0,reward:0,bloodUse:0,countDown:""}],colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}]}},mounted:function(){this.Wallet.connected?this.RefreshHeros():this.Wallet.$on("connect",this.onconnect),this.countDownInterval=setInterval(this.countDownEvent,1e3)},beforeDestroy:function(){clearInterval(this.countDownInterval)},methods:{onconnect:function(){this.Wallet.$off("connect",this.onconnect),this.RefreshHeros()},RefreshHeros:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,o,i,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.Wallet.game3,e.next=3,Promise.all([a.getBossNames(),a.getBossItems()]);case 3:n=e.sent,o=Object(s["a"])(n,2),i=o[0],l=o[1],d=l.map((function(t,e){return Object(r["a"])({name:c["c"].parseBytes32String(i[e])},t)})),d.forEach((function(e){var n=t.items.find((function(t){return t.name===e.name}));n&&(n.rate=e.rate,n.reward=e.feats.toNumber(),n.lastIndex=e.lastIndex,a.getBettleById(e.lastIndex).then((function(e){var a=e.blood-e.bloodUse;n.bloodUse=Number((a/e.blood*100).toFixed(2)),n.state=t.getTimeSleep(e.startTime)>0?"Dead":"Alive",n.startTime=e.startTime})))}));case 9:case"end":return e.stop()}}),e)})))()},Activation:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.Wallet,n=a.token,o=a.game3,t.ActivationIng=!0,e.prev=2,e.next=5,n.approve(o.address,c["c"].parseEther("10000000000"));case 5:t.Wallet.game3approve=!0;case 6:return e.prev=6,t.ActivationIng=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[2,,6,9]])})))()},getTimeSleep:function(t){var e=(new Date).getTime()/1e3;return t-e},countDownEvent:function(){var t=this;this.items.forEach((function(e){if("Dead"===e.state){var a=Math.floor(t.getTimeSleep(e.startTime));if(a>1){var n=t.FormDatadoubli(Math.floor(a/3600/24)),o=t.FormDatadoubli(Math.floor(a/3600%24)),r=t.FormDatadoubli(Math.floor(a/60%60)),s=t.FormDatadoubli(Math.floor(a%60));e.countDown="".concat(n,":").concat(o,":").concat(r,":").concat(s)}else t.RefreshHeros()}}))},FormDatadoubli:function(t){return t||(t=0),t>=10?"".concat(t%100):"0".concat(t)}}},d=l,u=(a("2c8b"),a("2e32"),a("2877")),f=Object(u["a"])(d,n,o,!1,null,"3a4fedd6",null);e["default"]=f.exports},ec52:function(t,e,a){t.exports=a.p+"static/img/zhangbao.8c2d106f.png"}}]);