(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e71ed7d2"],{"0cb7":function(t,e,n){},"830a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-merit"},[n("el-radio-group",{staticClass:"router",model:{value:t.navtype,callback:function(e){t.navtype=e},expression:"navtype"}},[n("el-radio-button",{attrs:{label:"swap"}},[t._v(t._s(t.$t("merit.swap")))]),n("el-radio-button",{attrs:{label:"store"}},[t._v(t._s(t.$t("merit.store")))])],1),"swap"==t.navtype?[n("el-card",{staticClass:"swap-box",staticStyle:{"margin-bottom":"1rem"},attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(t.$t("merit.liquidity")))])]),n("countTo",{attrs:{"start-val":t.reserveInOld,"end-val":t.reserveIn,duration:1e3,suffix:" Merit"}}),n("countTo",{staticStyle:{float:"right"},attrs:{"start-val":t.reserveOutSmallOld,"end-val":t.reserveOutSmall,duration:1e3,suffix:" TKB"}})],1),n("el-card",{staticClass:"swap-box",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("h3",[t._v(t._s(t.$t("merit.exchange")))]),n("span",[t._v(t._s(t.$t("merit.exchangeinfo")))])]),[n("div",{staticClass:"swap-box-input"},[n("div",[n("span",[t._v(t._s(t.$t("merit.in")))]),n("span",{staticStyle:{float:"right",margin:"0.5rem"}},[t._v(t._s(t.$t("merit.balance"))+": "+t._s(t.Wallet.meritPrice))])]),n("el-input",{attrs:{min:1,type:"number",placeholder:"0"},on:{input:t.amountInChange},model:{value:t.amountIn,callback:function(e){t.amountIn=e},expression:"amountIn"}},[t.amountIn!=t.Wallet.meritPrice?n("h4",{staticClass:"swap-box-input-max",attrs:{slot:"suffix"},on:{click:function(e){t.amountIn=t.Wallet.meritPrice,t.amountInChange()}},slot:"suffix"},[t._v(" MAX ")]):t._e(),n("h3",{staticClass:"swap-box-input-coin",attrs:{slot:"suffix"},slot:"suffix"},[t._v(" Merit ")])])],1),n("div",{staticClass:"swap-box-input"},[n("div",[n("span",[t._v(t._s(t.$t("merit.out")))]),n("span",{staticStyle:{float:"right",margin:"0.5rem"}},[t._v(t._s(t.$t("merit.balance"))+": "+t._s(t.Wallet.smallBalance))])]),n("el-input",{attrs:{readonly:""},model:{value:t.amountOut,callback:function(e){t.amountOut=e},expression:"amountOut"}},[n("h3",{staticClass:"swap-box-input-coin",attrs:{slot:"suffix"},slot:"suffix"},[t._v(" TKB ")])])],1),!t.enable||t.countdown>0?[n("el-button",{staticClass:"swap-box-btn",attrs:{disabled:!0,type:"info"}},[t._v(t._s(t.enable?t.doucntdownStr:t.$t("merit.disable")))])]:[n("el-button",{staticClass:"swap-box-btn",attrs:{loading:t.state>0,disabled:t.amountIn>t.Wallet.meritPrice||t.amountIn<=0,type:"primary"},on:{click:t.doswap}},[t._v(t._s(t.$t("merit.doswap")))])]]],2),t.meritRate>0?n("el-card",{staticClass:"swap-box",staticStyle:{"margin-top":"1rem",padding:"0.5rem"},attrs:{shadow:"never"}},[n("div",{staticStyle:{color:"red"}},[t._v(" 30% "+t._s(t.$t("merit.ratestr"))+" ")])]):t._e()]:[n("el-card",{staticClass:"swap-box"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(t.$t("merit.store")))])]),n("el-empty",{attrs:{description:t.$t("dev")}})],1)]],2)},r=[],i=n("3835"),s=n("1da1"),o=(n("99af"),n("a9e3"),n("b680"),n("96cf"),n("ec1b")),u=n.n(o),l=n("e36d"),c=n("6779"),d={components:{countTo:u.a},data:function(){return{meritRate:0,amountIn:0,amountOut:0,balance:5e3,swapMin:1e3,navtype:"swap",reserveInOld:0,reserveIn:0,reserveOut:l["a"].from("0"),reserveOutSmallOld:0,reserveOutSmall:0,enable:!1,countdown:0,countdownTime:0,UpdateInterval:null,CountdownInterval:null,state:0,doucntdownStr:"00:00:00"}},watch:{reserveIn:function(t,e){this.reserveInOld=e,this.amountInChange()},reserveOutSmall:function(t,e){this.reserveOutSmallOld=e,this.amountInChange()}},mounted:function(){this.Wallet.connected?this.refreshPool():this.Wallet.$on("connect",this.onconnect),this.UpdateInterval=setInterval(this.updateEvent,3e3)},beforeDestroy:function(){clearInterval(this.UpdateInterval)},methods:{onconnect:function(){this.Wallet.$off("connect",this.onconnect),this.refreshPool()},updateEvent:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.refreshPool();case 1:case"end":return e.stop()}}),e)})))()},countdownEvent:function(){if(this.countdown>0){var t=this.countdown-((new Date).getTime()-this.countdownTime)/1e3;if(t>1){var e=this.FormDatadoubli(Math.floor(t/3600/24)),n=this.FormDatadoubli(Math.floor(t/3600%24)),a=this.FormDatadoubli(Math.floor(t/60%60)),r=this.FormDatadoubli(Math.floor(t%60));return void(this.doucntdownStr="".concat(e,":").concat(n,":").concat(a,":").concat(r))}}clearInterval(this.CountdownInterval),this.CountdownInterval=null},FormDatadoubli:function(t){return t||(t=0),t>=10?"".concat(t%100):"0".concat(t)},refreshRate:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.Wallet,a=n.game3,r=n.account,e.next=3,a.isShortPeriod(r);case 3:e.t0=e.sent,t.meritRate=100-e.t0;case 5:case"end":return e.stop()}}),e)})))()},refreshPool:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r,s,o,u,l,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.Wallet.game3,e.next=3,n.getMeritPool();case 3:return a=e.sent,r=Object(i["a"])(a,2),s=r[0],o=r[1],t.reserveIn=s.toNumber(),t.reserveOut=o,t.reserveOutSmall=Math.floor(Number(c["c"].formatEther(o))),e.next=12,n.getMeritRewardInfo();case 12:u=e.sent,l=Object(i["a"])(u,2),d=l[0],m=l[1],t.enable=d,t.countdown!==m&&(t.countdownTime=(new Date).getTime()),t.countdown=m,m>0&&!t.CountdownInterval&&(t.CountdownInterval=setInterval(t.countdownEvent,1e3)),t.refreshRate();case 21:case"end":return e.stop()}}),e)})))()},amountInChange:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t)try{e.amountIn=Number(Math.floor(e.amountIn)),Number(e.amountIn)<0&&(e.amountIn=0)}catch(a){e.amountIn=0}e.amountOut=c["c"].formatEther(e.getAmountOut(l["a"].from(e.amountIn),l["a"].from(e.reserveIn),e.reserveOut));case 2:case"end":return n.stop()}}),n)})))()},getAmountOut:function(t,e,n){var a=t.mul(9975),r=a.mul(n),i=e.mul(1e4).add(a),s=r.div(i);return s},doswap:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state=1,n=t.Wallet.game3,e.prev=2,e.next=5,n.MeritReward(t.amountIn);case 5:return a=e.sent,e.next=8,a.wait();case 8:r=e.sent,i=Number(c["c"].formatEther(r.logs[0].data)).toFixed(3),t.$message.success("".concat(t.$t("merit.out")," ").concat(i," TKB")),t.Wallet.RefreshTKBPrice(),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),t.$message.warning(e.t0.message||e.t0.data.message);case 17:return e.prev=17,t.state=0,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))()}}},m=d,h=(n("d116"),n("2877")),f=Object(h["a"])(m,a,r,!1,null,null,null);e["default"]=f.exports},d116:function(t,e,n){"use strict";n("0cb7")},ec1b:function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){return function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=2)}([function(t,e,n){var a=n(4)(n(1),n(5),null,null);t.exports=a.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(3);e.default={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator:function(t){return t>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default:function(t,e,n,a){return n*(1-Math.pow(2,-10*t/a))*1024/1023+e}}},data:function(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown:function(){return this.startVal>this.endVal}},watch:{startVal:function(){this.autoplay&&this.start()},endVal:function(){this.autoplay&&this.start()}},mounted:function(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start:function(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=(0,a.requestAnimationFrame)(this.count)},pauseResume:function(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause:function(){(0,a.cancelAnimationFrame)(this.rAF)},resume:function(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,(0,a.requestAnimationFrame)(this.count)},reset:function(){this.startTime=null,(0,a.cancelAnimationFrame)(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count:function(t){this.startTime||(this.startTime=t),this.timestamp=t;var e=t-this.startTime;this.remaining=this.localDuration-e,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(e,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(e,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(e/this.localDuration):this.printVal=this.localStartVal+(this.localStartVal-this.startVal)*(e/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),e<this.localDuration?this.rAF=(0,a.requestAnimationFrame)(this.count):this.$emit("callback")},isNumber:function(t){return!isNaN(parseFloat(t))},formatNumber:function(t){t=t.toFixed(this.decimals),t+="";var e=t.split("."),n=e[0],a=e.length>1?this.decimal+e[1]:"",r=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;r.test(n);)n=n.replace(r,"$1"+this.separator+"$2");return this.prefix+n+a+this.suffix}},destroyed:function(){(0,a.cancelAnimationFrame)(this.rAF)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=r.default,"undefined"!=typeof window&&window.Vue&&window.Vue.component("count-to",r.default)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=0,r="webkit moz ms o".split(" "),i=void 0,s=void 0;if("undefined"==typeof window)e.requestAnimationFrame=i=function(){},e.cancelAnimationFrame=s=function(){};else{e.requestAnimationFrame=i=window.requestAnimationFrame,e.cancelAnimationFrame=s=window.cancelAnimationFrame;for(var o=void 0,u=0;u<r.length&&(!i||!s);u++)o=r[u],e.requestAnimationFrame=i=i||window[o+"RequestAnimationFrame"],e.cancelAnimationFrame=s=s||window[o+"CancelAnimationFrame"]||window[o+"CancelRequestAnimationFrame"];i&&s||(e.requestAnimationFrame=i=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-a)),r=window.setTimeout((function(){t(e+n)}),n);return a=e+n,r},e.cancelAnimationFrame=s=function(t){window.clearTimeout(t)})}e.requestAnimationFrame=i,e.cancelAnimationFrame=s},function(t,e){t.exports=function(t,e,n,a){var r,i=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(r=t,i=t.default);var o="function"==typeof i?i.options:i;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),n&&(o._scopeId=n),a){var u=Object.create(o.computed||null);Object.keys(a).forEach((function(t){var e=a[t];u[t]=function(){return e}})),o.computed=u}return{esModule:r,exports:i,options:o}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._v("\n  "+t._s(t.displayValue)+"\n")])},staticRenderFns:[]}}])}))}}]);